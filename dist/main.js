(()=>{"use strict";var e=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{s(o.next(e))}catch(e){a(e)}}function c(e){try{s(o.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}s((o=o.apply(e,t||[])).next())}))},t=function(e,t){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,o=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){i.label=c[1];break}if(6===c[0]&&i.label<r[1]){i.label=r[1],r=c;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(c);break}r[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],o=0}finally{n=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},n="en";function o(){return e(this,void 0,void 0,(function(){var e,o;return t(this,(function(t){switch(t.label){case 0:return[4,document.getElementById("ru")];case 1:return e=t.sent(),[4,document.getElementById("en")];case 2:return(o=t.sent())&&e&&("ru"===n?e.checked=!0:"en"===n&&(o.checked=!0)),[2]}}))}))}var r="https://api-ec14.onrender.com";function a(e){return fetch("".concat(r,"/user/gettasks?user_id=").concat(e),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"same-origin"}).then((function(e){return e.json()}))}function i(e){return fetch("".concat(r,"/user/getposts?task_id=").concat(e),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"same-origin"}).then((function(e){return e.json()}))}var c=function(){document.querySelectorAll(".task-checkbox").forEach((function(e){e.addEventListener("change",(function(e){e.target.parentElement;var t=+e.target.id;a(+localStorage.getItem("user_id")).then((function(e){for(var n=0;n<e.length;n++){var o=e[n];if(o.id===t){var r=document.querySelector(".view-task-title-name"),a=document.querySelector(".view-task-priority-container");a.classList.remove("priority-high"),a.classList.remove("priority-low"),a.classList.remove("priority-none"),a.classList.add("priority-"+o.priority),r.innerHTML=o.title,i(t).then((function(e){e.forEach((function(e){var t=document.querySelector(".task-note-view"),n=document.createElement("div"),o=document.createElement("li");n.classList.add("note-container"),o.classList.add("note-text"),o.textContent=e.content,n.append(o),t.append(n)}))}))}}})),document.querySelector(".task-note-view").innerHTML=""}))}))};const s=function(){function e(e){this.container=document.createElement("div"),this.container.className=e}return e.prototype.createHeaderTitle=function(e){var t=document.createElement("h1");return t.textContent=e,t},e.prototype.render=function(){return this.container},e.TextObject={},e}(),l=function(){function e(e,t){this.container=document.createElement(e),this.container.className=t}return e.prototype.render=function(){return this.container},e}();function u(e,t,n,o){var r,a=document.createElement(e);if(!a)throw new Error("Error in element creating");return t&&(r=a.classList).add.apply(r,t.split(" ")),void 0!==o&&(a.textContent=o),n&&n.append(a),a}var d,p=(d=function(e,t){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},d(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}d(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),m=function(e){function t(t,n){return e.call(this,t,n)||this}return p(t,e),t.prototype.createHeader=function(){var e=document.createElement("div");e.className="header-wrapper";var t=u("div","header__link-wrapper",e),n=u("a","header__link",t),o=document.createElement("div");return o.className="header_logo",n.append(o),n.href="#main-page",u("div","header__title",o,"Remember the milk"),e.append(this.renderLangs()),e.append(this.renderLinks()),e},t.prototype.renderLangs=function(){var e=document.createElement("div");return e.classList.add("header__langs"),e.innerHTML='\n    <label class="lang__label lang-label-en" for="en">EN<input type="radio" class="lang__button" id="en" name="langs"></label>\n    <label  class="lang__label lang-label-ru"for="ru">RU<input type="radio"  class="lang__button"id="ru" name="langs"></label>\n\n    ',e},t.prototype.renderLinks=function(){var e=document.createElement("nav");e.className="navigation";var t=document.createElement("ul");t.className="navigation-list";var o=["Main","Help","Log in","Sign Up for free"];return"en"===n?o=["Main","Help","Log in","Sign Up for free"]:"ru"===n&&(o=["Главная","Помощь","Вход","Регистрация"]),["nav-link nav-main","nav-link nav-help","nav-link nav-log-in","nav-link nav-sign-up"].forEach((function(e,n){var r=o[n],a=document.createElement("li");a.className="navigation-item";var i=document.createElement("a");i.className=e,i.textContent=r,0===n&&(i.href="#main-page",i.classList.add("active-link")),1===n&&(i.href="#help"),2===n&&(i.href="#registration"),3===n&&(i.href="#registration"),a.append(i),t.append(a)})),e.append(t),e},t.prototype.render=function(){var e=this.createHeader();return this.container.append(e),this.container},t}(l);const v=m;var f=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),h=function(e){function t(t,n){var o=e.call(this,t,n)||this;return o.slider=document.createElement("div"),o.slider.classList.add("start__slider","slider"),o}return f(t,e),t.prototype.makeHeader=function(){var e=document.createElement("div");e.className="start",u("h1","start__header",e,"en"===n?"The smart to-do app for busy people!":"Умное приложение для занятых людей!");var t=document.createElement("a");return t.classList.add("btn","start__btn"),t.href="#registration",e.append(t),t.textContent="en"===n?"Sign up":"Регистрация",this.slider.innerHTML=this.makeSliderBtn(),e.append(this.slider),e},t.prototype.makeSliderBtn=function(){return'\n    <div class="slider__image">\n      <div class="slider__img slider-en slider__one" preload="lazy"></div>\n    </div>\n    <div class="slider__btns">\n      <input type="radio" class="slider__button" id="btn-one" name="scales" checked>\n      <input type="radio"  class="slider__button"id="btn-two" name="scales">\n      <input type="radio" class="slider__button" id="btn-three" name="scales">\n      <input type="radio"  class="slider__button"id="btn-four" name="scales">\n    </div>\n    '},t.prototype.render=function(){var e=this.makeHeader();return this.container.append(e),this.container},t}(l);const y=h;var g=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),k=function(e){function t(t,n){return e.call(this,t,n)||this}return g(t,e),t.prototype.makeFooter=function(){return'\n    <div class="footer__container">\n    <div class="footer__author ">\n    <span>&copy; 2023</span>\n      </div>\n    <a href="https://github.com/geniusx1990" class="footer__link">geniusx1990</a>\n    <a href="https://github.com/inni-ast" class="footer__link">inni-ast</a>\n    <a href="https://github.com/angelica-zb" class="footer__link">angelica-zb</a>\n  <div class="footer__rss">\n    <a href="https://rs.school/js/" class="footer__link">\n      <img src="https://rs.school/images/rs_school.svg" class="footer__rss-img" alt="RSS logo">\n    </a>\n  </div>\n  </div>\n    '},t.prototype.render=function(){var e=this.makeFooter();return this.container.innerHTML=e,this.container},t}(l);const b=k;var _=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const w=function(e){function t(t){var n=e.call(this,t)||this;return n.header=new v("header","header-container"),n.section=new y("section","main-section"),n.footer=new b("footer","footer"),n}return _(t,e),t.prototype.render=function(){return this.container.append(this.header.render()),this.container.append(this.section.render()),this.container.append(this.footer.render()),this.container},t}(s);var L=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),E=function(e){function t(t,n){return e.call(this,t,n)||this}return L(t,e),t.prototype.renderLangs=function(){var e=document.createElement("div");return e.classList.add("header__langs"),e.innerHTML='\n        <label class="lang__label lang-label-en" for="en">EN<input type="radio" class="lang__button" id="en" name="langs"></label>\n        <label  class="lang__label lang-label-ru"for="ru">RU<input type="radio"  class="lang__button"id="ru" name="langs"></label>\n\n        ',e},t.prototype.createHeader=function(){var e=document.createElement("div");e.className="header-wrapper";var t=this.renderLangs();return e.append(t),u("div","header__setings",e).addEventListener("click",(function(e){e.preventDefault(),localStorage.removeItem("user_id"),localStorage.removeItem("email"),localStorage.removeItem("task_id"),location.href="../#main-page"})),e},t.prototype.render=function(){var e=this.createHeader();return this.container.append(e),this.container},t}(l);const S=E;var x=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const C=function(e){function t(t,n){var o=e.call(this,t,n)||this;return o.menu=document.createElement("div"),o.menu.classList.add("start__menu","menu"),o}return x(t,e),t.prototype.makeMenu=function(){var e=document.createElement("div");e.className="header-menu";var t=document.createElement("div");t.className="header_logo",e.append(t),u("div","header__title",t,"Remember the milk");var o="Приоритет",r=["Все задачи","Высокий приоритет","Низкий приоритет"];return"ru"===n?(o="Приоритет",r=["Все задачи","Высокий приоритет","Низкий приоритет"]):"en"===n&&(o="Priority",r=["All tasks","High priority","Low priority"]),this.menu.append(this.renderMenu(o,r,"menu-item-inbox","inbox-all")),e.append(this.menu),e},t.prototype.renderMenu=function(e,t,n,o){var r=document.createElement("div");r.className="header-in-menu";var a=document.createElement("div");a.className="header-menu-button-cont";var i=document.createElement("div");i.className="header-menu-button";var c=document.createElement("div");c.className="header-menu-button-title",c.classList.add(o),c.innerHTML=e,a.append(i,c);var s=document.createElement("ul");return s.className="in-menu-list show",i.onclick=function(){s.classList.toggle("show"),r.classList.toggle("show-menu"),i.classList.toggle("show-button")},t.forEach((function(e){var t=document.createElement("li");t.className=n,t.textContent=e,s.append(t)})),r.append(a,s),r},t.prototype.appendTask=function(e){var t=document.querySelector(".task-bord-body"),n=document.createElement("div"),o=document.createElement("div"),r=document.createElement("input"),a=document.createElement("label");n.classList.add("task-checkbox-container"),o.classList.add("task-priority-container"),o.id="priority-"+e.id.toString(),r.setAttribute("type","checkbox"),r.setAttribute("name","task"),r.classList.add("task-checkbox"),r.value=e.title,r.id="".concat(e.id),a.classList.add("task-checkbox-text"),a.innerHTML=e.title,a.setAttribute("for","".concat(e.id)),a.id="".concat(e.id),n.append(o,r,a),t.append(n)},t.prototype.makeTaskBord=function(){var e=this,t=document.createElement("div");t.className="task-bord";var o=document.createElement("div");o.classList.add("header-task-bord");var i=document.createElement("div");i.classList.add("button-task-bord");var s=document.createElement("div");s.className="button-task",s.classList.add("button-task-one"),s.textContent="ru"===n?"Задачи":"Tasks",i.append(s);var l=this.createTaskButton(),u=document.createElement("div");u.classList.add("task-add-container");var d=document.createElement("input");d.classList.add("task-add-input","task-add-input-lang"),d.setAttribute("type","text"),d.placeholder="ru"===n?"Добавить задачу":"Add a task";var p=document.createElement("button");p.classList.add("task-add-button","task-add-button-lang"),p.textContent="ru"===n?"Добавить":"Add";var m=+localStorage.getItem("user_id");p.addEventListener("click",(function(){var t;d.value.length>0&&(p.classList.remove("task-add-button-active"),(t={title:d.value,user_id:m,content:"content",priority:"none",completed:"not completed"},fetch("".concat(r,"/user/addtask"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()}))).then((function(t){e.appendTask(t),a(+localStorage.getItem("user_id")).then((function(e){var t=document.querySelector(".task-title-done"),n=document.querySelector(".task-title-do"),o=e.filter((function(e){return"completed"===e.completed})).length,r=e.length;n.textContent=r.toString(),t.textContent=o.toString()})),d.value="",p.classList.remove("task-add-button-active"),c()})))})),d.addEventListener("keyup",(function(){var e=document.querySelector(".task-add-input"),t=document.querySelector(".task-add-button");e.value.length>0?t.classList.add("task-add-button-active"):t.classList.remove("task-add-button-active")})),u.append(d,p),o.append(i,l,u);var v=document.createElement("div");return v.classList.add("task-bord-body"),a(m).then((function(e){e.forEach((function(t){var n=document.createElement("div"),o=document.createElement("div"),r=document.createElement("input"),a=document.createElement("label");n.classList.add("task-checkbox-container"),o.classList.add("task-priority-container"),"low"===t.priority&&o.classList.add("priority-low"),o.id="priority-"+t.id.toString(),"high"===t.priority&&o.classList.add("priority-high"),r.setAttribute("type","checkbox"),r.setAttribute("name","task"),r.classList.add("task-checkbox"),r.value=t.title,r.id="".concat(t.id),a.classList.add("task-checkbox-text"),"completed"===t.completed&&a.classList.add("task-done");var i=document.querySelector(".task-title-done"),c=document.querySelector(".task-title-do"),s=e.filter((function(e){return"completed"===e.completed})).length,l=e.length;c.textContent=l.toString(),i.textContent=s.toString(),a.innerHTML=t.title,a.setAttribute("for","".concat(t.id)),a.id="".concat(t.id),n.append(o,r,a),v.append(n)})),c()})),t.append(o,v),t},t.prototype.createTaskButton=function(){var e=this,t=document.createElement("div");t.classList.add("task-button-container");var o=document.createElement("div");o.classList.add("task-button-done-delite"),u("button","button-task-done",o).addEventListener("click",(function(){var t,n=localStorage.getItem("task_id");if(null!==n){t={id:Number(n),completed:"completed"},fetch("".concat(r,"/user/completed"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})),e.updateCounter();var o=document.querySelector(".view-task-container");null==o||o.classList.add("hover-task-container"),document.querySelectorAll(".task-checkbox-text").forEach((function(e){e.id===n&&e.classList.add("task-done")}))}})),u("button","button-task-delite",o).addEventListener("click",(function(){var t,n=localStorage.getItem("task_id");if(null!==n){t=Number(n),fetch("".concat(r,"/user/deletetask/").concat(t),{method:"DELETE",body:JSON.stringify(t)}).then((function(e){return e.json()})),e.updateCounter();var o=document.querySelector(".view-task-container");null==o||o.classList.add("hover-task-container"),document.querySelectorAll(".task-checkbox").forEach((function(e){var t;e.id===n&&(null===(t=e.parentElement)||void 0===t||t.remove())}))}}));var a=document.createElement("div");a.classList.add("task-button-select");var i=document.createElement("select");i.classList.add("task-select");var c=u("option","option-select",i,"Choose a priority"),s=u("option","option-select option-select-pr",i,"Remove priority"),l=u("option","option-select option-select-high",i,"Set high priority"),d=u("option","option-select option-select-low",i,"Set low priority");return"ru"===n&&(c=u("option","option-select",i,"Выбери приоритете"),s=u("option","option-select option-select-pr",i,"Убрать приоритет"),l=u("option","option-select option-select-high",i,"Установить высокий приоритет"),d=u("option","option-select option-select-low",i,"Установить низкий приоритет")),c.value="0",s.value="none",l.value="high",d.value="low",i.addEventListener("change",(function(){var e=localStorage.getItem("task_id"),t={id:Number(e),priority:i.value};(function(e){return fetch("".concat(r,"/user/prioritychange"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()}))})(t).then((function(){var e=document.querySelector(".task-priority-container#priority-".concat(t.id)),n=document.querySelector(".view-task-priority-container");e&&(n.classList.remove("priority-high"),n.classList.remove("priority-low"),n.classList.remove("priority-none"),n.classList.add("priority-"+t.priority),e.className="task-priority-container",e.classList.add("priority-"+t.priority))})),i.value="0"})),a.append(i),t.append(o,a),t},t.prototype.updateCounter=function(){a(+localStorage.getItem("user_id")).then((function(e){var t=document.querySelector(".task-title-done"),n=document.querySelector(".task-title-do"),o=e.filter((function(e){return"completed"===e.completed})).length,r=e.length;n.textContent=r.toString(),t.textContent=o.toString()}))},t.prototype.makeInfoBord=function(){var e=document.createElement("div");e.className="info-bord";var t=document.createElement("div");t.classList.add("task-title","task-title-lang"),t.innerHTML="ru"===n?"Входящие":"Inbox";var o=document.createElement("div");o.classList.add("task-title-list");var r=document.createElement("div");r.classList.add("task-title-container");var a=document.createElement("div");a.classList.add("task-title-do");var i=document.createElement("div");i.classList.add("task-count-do","task-count-do-task"),i.innerHTML="ru"===n?"задач(и)":"tasks",r.append(a,i);var c=document.createElement("div");c.classList.add("task-title-container");var s=document.createElement("div");s.classList.add("task-title-done");var l=document.createElement("div");return l.classList.add("task-count-do","task-completed"),l.innerHTML="ru"===n?"завершено":"completed",c.append(s,l),o.append(r,c),e.append(t,o),e},t.prototype.makeViewTask=function(){var e=this,t=document.createElement("div");t.classList.add("view-task-container"),t.classList.add("hover-task-container");var o=document.createElement("div");o.classList.add("view-task-container-close"),o.textContent="ru"===n?"закрыть":"close";var a=document.createElement("span");a.classList.add("view-task-container-closeX"),a.textContent="x",o.append(a);var i=document.createElement("div");i.classList.add("view-task-title");var c=document.createElement("div");c.classList.add("view-task-priority-container");var s=document.createElement("div");s.classList.add("view-task-title-name");var l=document.createElement("div");l.classList.add("task-note-container");var u=document.createElement("div");u.classList.add("task-note-title","task-note-title-lang"),u.innerHTML="ru"===n?"Заметки":"Notes";var d=document.createElement("div");d.classList.add("task-note-input-container");var p=document.createElement("div");p.classList.add("task-note-input-img");var m=document.createElement("input");m.classList.add("task-note-input","task-note-input-lang"),m.setAttribute("type","text"),m.placeholder="ru"===n?"Добавить заметку":"Add a note";var v=document.createElement("div");v.classList.add("task-note-button-container");var f=document.createElement("button");f.classList.add("task-note-button-yes"),f.innerHTML="ru"===n?"Сохранить":"Save",localStorage.getItem("task_id"),f.addEventListener("click",(function(){var t,n=+localStorage.getItem("task_id");m.value.length>0&&(t={content:m.value,task_id:n},fetch("".concat(r,"/user/addpost"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()}))).then((function(t){e.appendNote(t),m.value="",f.classList.remove("task-add-button-active")}))})),m.addEventListener("keyup",(function(){var e=document.querySelector(".task-note-input"),t=document.querySelector(".task-note-button-yes");e.value.length>0?t.classList.add("task-add-button-active"):t.classList.remove("task-add-button-active")}));var h=document.createElement("div");return h.classList.add("task-note-view"),v.append(f),d.append(p,m),l.append(u,d,v),i.append(c,s),t.append(o,i,l,h),t},t.prototype.appendNote=function(e){var t=document.querySelector(".task-note-view"),n=document.querySelector(".task-note-input"),o=document.createElement("div"),r=document.createElement("li");o.classList.add("note-container"),r.classList.add("note-text"),r.innerHTML=n.value,o.append(r),t.append(o)},t.prototype.render=function(){var e=this.makeMenu(),t=this.makeTaskBord(),n=this.makeInfoBord(),o=this.makeViewTask();return n.append(o),this.container.append(e,t,n),this.container},t}(l);var T=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const q=function(e){function t(t){var n=e.call(this,t)||this;return n.header=new S("header","header-container"),n.section=new C("section","main-section"),n.footer=new b("footer","footer"),n}return T(t,e),t.prototype.render=function(){return this.container.append(this.header.render()),this.container.append(this.section.render()),this.container.append(this.footer.render()),this.container},t}(s);var O=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const N=function(e){function t(t,n){return e.call(this,t,n)||this}return O(t,e),t.prototype.createSignForm=function(){var e=document.createElement("div");e.className="user sign-in-container";var t=document.createElement("div");t.className="quote-container";var o=document.createElement("h3");o.className="quote-text",o.textContent="en"===n?"“I am rather like a mosquito in a nudist camp; I know what I want to do, but I don’t know where to begin.”":"“Я скорее как комар в нудистском лагере. Я знаю, чем хочу заниматься, но не знаю, с чего начать.”";var a=document.createElement("p");a.className="quote-author",a.textContent="en"===n?"- David Allen":"- Дэвид Аллен",t.append(o,a);var i=document.createElement("div");i.className="form-container",u("div","registration__image",i);var c=document.createElement("form"),s=document.createElement("h3");s.textContent="en"===n?"Sign In":"Вход";var l=document.createElement("input");l.className="mail-sign-in",l.type="email",l.setAttribute("required",""),l.placeholder="en"===n?"Email":"Ваша почта";var d=document.createElement("input");d.className="password-sign-in",d.type="password",d.placeholder="en"===n?"Password":"Пароль",d.setAttribute("required","");var p=document.createElement("input");p.className="button-sign-in",p.type="submit",p.value="en"===n?"Sign In":"Вход";var m=document.createElement("a");m.className="sign-up-link",m.textContent="en"===n?"Sign Up":"Регистрация",m.setAttribute("href","#registration"),m.addEventListener("click",(function(){document.querySelector(".container").classList.toggle("active")}));var v=document.createElement("p");return v.className="signin",v.textContent="en"===n?"Don't have an account ?":"У Вас еще нет аккаунта ?",v.append(m),c.append(s,l,d,p,v),i.append(c),e.append(t,i),p.addEventListener("click",(function(e){var t,n;e.preventDefault(),t=l.value,n=d.value,fetch("".concat(r,"/user/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})}).then((function(e){return e.json()})).then((function(e){var t=e.user_id;e.error?alert("".concat(e.error)):t&&(localStorage.setItem("user_id",e.user_id),location.href="../#application-page")})).catch((function(e){alert("Error Signing In, please try again.")}))})),e},t.prototype.createSignUpForm=function(){var e=document.createElement("div");e.className="user signupBx";var t=document.createElement("div");t.className="quote-container";var o=document.createElement("h3");o.textContent="en"===n?"“A journey of a thousand miles begins with a single step.”":'"Путешествие в тысячу миль начинается с одного шага."';var a=document.createElement("p");a.textContent="en"===n?"- Laozi":"- Лао-цзы",t.append(o,a);var i=document.createElement("div");i.className="form-container";var c=document.createElement("form"),s=document.createElement("h3");s.textContent="en"===n?"Create an account":"Создать аккаунт";var l=document.createElement("input");l.className="name",l.type="text",l.placeholder="en"===n?"Username":"Логин",l.setAttribute("required","");var u=document.createElement("input");u.className="mail-sign-up",u.type="email",u.placeholder="en"===n?"Email Address":"Ваша почта",u.setAttribute("required","");var d=document.createElement("input");d.className="phone",d.type="tel",d.placeholder="en"===n?"Contact":"Ваш телефон",d.setAttribute("id","phone"),d.setAttribute("required","");var p=document.createElement("input");p.className="password-input-first",p.type="password",p.placeholder="en"===n?"Create Password":"Ввести пароль",p.setAttribute("required","");var m=document.createElement("input");m.className="password-input-second",m.type="password",m.placeholder="en"===n?"Confirm Password":"Подтвердить пароль",m.setAttribute("required","");var v=document.createElement("input");v.className="button-sign-up",v.type="submit",v.value="en"===n?"Sign Up":"Регистрация",v.addEventListener("click",(function(e){e.preventDefault();var t=l.value,o=u.value,a=d.value,i=p.value;i===m.value?function(e,t,n,o){fetch("".concat(r,"/user/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:t,phonenumber:n,password:o})}).then((function(e){return e.json()})).then((function(e){e.error?alert("".concat(e.error)):alert("Account created. Signing in please.")})).catch((function(e){alert("Error Signing up, try again.")}))}(t,o,a,i):"en"===n?alert("Wrong password, please check both passwords."):alert("Неверный пароль, сверьте оба пароля.")})),document.createElement("a").textContent="en"===n?"Sign Up":"Регистрация";var f=document.createElement("p");f.className="signin",f.textContent="en"===n?"Do you have an account ?":"У Вас уже есть аккаунт?";var h=document.createElement("a");h.append(v);var y=document.createElement("a");y.textContent="en"===n?"Sign In":"Вход",y.className="sign-up-link",y.addEventListener("click",(function(){document.querySelector(".container").classList.toggle("active")}));var g=document.createElement("p");return g.className="signup",g.textContent="en"===n?"Already have an account ?":"У Вас уже есть аккаунт?",f.append(y),c.append(s,l,u,d,p,m,h,f),i.append(c),e.append(i,t),e},t.prototype.render=function(){var e=this.createSignForm(),t=this.createSignUpForm();return this.container.append(e,t),this.container},t}(l);var j=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const A=function(e){function t(t){var n=e.call(this,t)||this;return n.signForm=new N("div","container"),n}return j(t,e),t.prototype.render=function(){return this.container.append(this.signForm.render()),this.container},t}(s);var H=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),P=function(e){function t(t,n){return e.call(this,t,n)||this}return H(t,e),t.prototype.makeHeader=function(){var e=document.createElement("div");e.className="start";var t=document.createElement("h1");return t.classList.add("help__header"),t.textContent="ru"===n?"Умное приложение для занятых людей!":"The smart to-do app for busy people!",e.append(t),e},t.prototype.render=function(){var e=this.makeHeader();return this.container.append(e),this.container},t}(l);const M=P;var I=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const B=function(e){function t(t){var n=e.call(this,t)||this;return n.header=new v("header","header-container"),n.section=new M("section","help-section"),n.footer=new b("footer","footer"),n}return I(t,e),t.prototype.render=function(){return this.container.append(this.header.render()),this.container.append(this.section.render()),this.container.append(this.footer.render()),this.container},t}(s);var U,F=function(){function e(){this.initialPage=new w("main-page")}return e.renderNewPage=function(t){var n=document.querySelector("#".concat(e.defaultPageId));n&&n.remove();var r,a,i,c,s=null;if("main-page"===t?s=new w(t):"application-page"===t?s=new q(t):"registration"===t?s=new A(t):"help"===t?s=new B(t):""===t&&(location.href="../#main-page"),s){var l=s.render();l.id=e.defaultPageId,e.container.append(l)}o(),function(e){var t,n,o,r;t=void 0,n=void 0,r=function(){var t,n;return function(e,t){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,o=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){i.label=c[1];break}if(6===c[0]&&i.label<r[1]){i.label=r[1],r=c;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(c);break}r[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],o=0}finally{n=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}(this,(function(o){switch(o.label){case 0:return[4,document.querySelector(".nav-help")];case 1:return t=o.sent(),[4,document.querySelector(".nav-main")];case 2:return null==(n=o.sent())||n.classList.remove("active-link"),null==t||t.classList.remove("active-link"),"main-page"===e?null==n||n.classList.add("active-link"):"help"===e&&(null==t||t.classList.add("active-link")),[2]}}))},new((o=void 0)||(o=Promise))((function(e,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function c(e){try{s(r.throw(e))}catch(e){a(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(i,c)}s((r=r.apply(t,n||[])).next())}))}(t),r=void 0,a=void 0,c=function(){return function(e,t){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,o=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){i.label=c[1];break}if(6===c[0]&&i.label<r[1]){i.label=r[1],r=c;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(c);break}r[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],o=0}finally{n=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}(this,(function(e){return window.addEventListener("click",(function(){var e=null===event||void 0===event?void 0:event.target;(e.classList.contains("nav-sign-up")||e.classList.contains("start__btn"))&&setTimeout((function(){document.querySelector(".container").classList.add("active")}),500)})),[2]}))},new((i=void 0)||(i=Promise))((function(e,t){function n(e){try{s(c.next(e))}catch(e){t(e)}}function o(e){try{s(c.throw(e))}catch(e){t(e)}}function s(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(n,o)}s((c=c.apply(r,a||[])).next())}))},e.prototype.enableRouteChange=function(){window.addEventListener("hashchange",(function(){var t=window.location.hash.slice(1);e.renderNewPage(t)}))},e.prototype.start=function(){var t=window.location.hash.slice(1);e.renderNewPage(t),this.enableRouteChange()},e.container=document.body,e.defaultPageId="current-page",e}();(new F).start(),window.addEventListener("change",(function(){var e=null===event||void 0===event?void 0:event.target;if(e.classList.contains("slider__button")){var t=document.querySelector(".slider__img");"btn-one"===e.id?(t.classList.remove("slider__two","slider__three","slider__four"),t.classList.add("slider__one"),document.body.style.background="#0060BF"):"btn-two"===e.id?(t.classList.remove("slider__one","slider__three","slider__four"),t.classList.add("slider__two"),document.body.style.background="#3292F2"):"btn-three"===e.id?(t.classList.remove("slider__one","slider__two","slider__four"),t.classList.add("slider__three"),document.body.style.background="#6A4CA6"):"btn-four"===e.id&&(t.classList.remove("slider__one","slider__two","slider__three"),t.classList.add("slider__four"),document.body.style.background="#5BB84D")}})),e(void 0,void 0,void 0,(function(){return t(this,(function(e){return o(),window.addEventListener("change",(function(){var e=null===event||void 0===event?void 0:event.target;if(e.classList.contains("lang__button")){var t=document.querySelector(".nav-main"),o=document.querySelector(".nav-help"),r=document.querySelector(".nav-log-in"),a=document.querySelector(".nav-sign-up"),i=document.querySelector(".start__header"),c=document.querySelector(".start__btn"),s=document.querySelector(".slider__img"),l=document.querySelector(".help__header"),u=document.querySelector(".button-task-one"),d=document.querySelector(".button-task-two"),p=document.querySelector(".task-add-input-lang"),m=document.querySelector(".task-add-button-lang"),v=document.querySelector(".option-select-personal"),f=document.querySelector(".option-select-work"),h=document.querySelector(".option-select-tomorrow"),y=document.querySelector(".option-select-today"),g=document.querySelector(".option-select-pr"),k=document.querySelector(".option-select-high"),b=document.querySelector(".option-select"),_=document.querySelector(".option-select-low"),w=document.querySelector(".task-title-lang"),L=document.querySelector(".task-count-do-task"),E=document.querySelector(".task-completed"),S=document.querySelector(".inbox-all"),x=document.querySelector(".inbox-list"),C=document.querySelector(".view-task-time-lang"),T=document.querySelector(".task-note-title-lang"),q=document.querySelector(".task-note-input-lang"),O=document.querySelector(".task-note-button-yes"),N=document.querySelector(".task-note-button-no"),j=document.querySelector(".view-task-container-close"),A=document.querySelectorAll(".menu-item-inbox"),H=["Все задачи","Высокий приоритет","Низкий приоритет"],P=["All tasks","High priority","Low priority"],M=document.querySelectorAll(".menu-item-list");if("ru"===e.id){if(n="ru",s&&(s.classList.remove("slider-en"),s.classList.add("slider-ru")),o&&r&&a&&t&&(t.textContent="Главная",o.textContent="Помощь",r.textContent="Вход",a.textContent="Регистрация"),i&&c&&(i.textContent="Умное приложение для занятых людей!",c.textContent="Регистрация"),l&&(l.textContent="Умное приложение для занятых людей!"),d&&(d.textContent="Завершенные"),u&&(u.textContent="Задачи"),p&&m&&(p.placeholder="Добавить задачу",m.textContent="Добавить"),v&&f&&(v.textContent="Личное",f.textContent="Работа"),h&&y&&(h.textContent="Завтра",y.textContent="Сегодня"),b&&g&&k&&_&&(b.textContent="Выбрать приоритет",g.textContent="Убрать приоритет",k.textContent="Установить высокий приоритет",_.textContent="Установить низкий приоритет"),w&&L&&E&&(w.innerHTML="Входящие",E.innerHTML="завершено",L.innerHTML="задач(и)"),x&&(x.textContent="Списки"),S&&(S.textContent="Приоритет"),C&&N&&(C.innerHTML="срок",N.innerHTML="Отмена"),T&&q&&(T.innerHTML="Заметки",q.placeholder="Добавить заметку"),O&&(O.innerHTML="Сохранить"),j&&(j.textContent="закрыть"),A.length>0)for(var I=0;I<A.length;I++)A[I].textContent=H[I];if(M.length>0)for(I=0;I<M.length;I++);}else{if(n="en",s&&(s.classList.remove("slider-ru"),s.classList.add("slider-en")),o&&r&&a&&t&&(t.textContent="Main",o.textContent="Help",r.textContent="Log in",a.textContent="Sign Up for free"),i&&c&&(i.textContent="The smart to-do app for busy people!",c.textContent="Sign up"),l&&(l.textContent="The smart to-do app for busy people!"),d&&(d.textContent="Completed"),u&&(u.textContent="Tasks"),p&&m&&(p.placeholder="Add a task",m.textContent="Add"),v&&f&&(v.textContent="Personal",f.textContent="Work"),h&&y&&(h.textContent="Tomorrow",y.textContent="Today"),b&&g&&k&&_&&(b.textContent="Choose a priority",g.textContent="Remove priority",k.textContent="Set high priority",_.textContent="Set low priority"),w&&(w.innerHTML="Inbox"),w&&L&&E&&(w.innerHTML="Inbox",E.innerHTML="completed",L.innerHTML="tasks"),x&&(x.textContent="Lists"),S&&(S.textContent="Priority"),C&&N&&(C.innerHTML="term",N.innerHTML="Cancel"),T&&q&&(T.innerHTML="Notes",q.placeholder="Add a note"),O&&(O.innerHTML="Save"),j&&(j.textContent="close"),A.length>0)for(I=0;I<A.length;I++)A[I].textContent=P[I];if(M.length>0)for(I=0;I<M.length;I++);}}})),[2]}))})),U=0,window.addEventListener("click",(function(){var e=document.querySelector(".view-task-container"),t=document.querySelectorAll(".task-checkbox"),n=document.querySelectorAll(".task-checkbox-container"),o=null===event||void 0===event?void 0:event.target;if(o.classList.contains("task-checkbox-text")){e.classList.remove("hover-task-container");for(var r=0;r<t.length;r++){var a=t[r];n[r].classList.remove("task-checkbox-container-active"),localStorage.setItem("task_id",o.id),a.checked&&(U=+a.id,a.checked=!1),U===+o.id&&(U=0,e.classList.add("hover-task-container"),localStorage.removeItem("task_id"),setTimeout((function(){for(var e=0;e<t.length;e++){var o=t[e];n[e].classList.remove("task-checkbox-container-active"),o.checked=!1,localStorage.removeItem("task_id")}}),0))}o.parentElement.classList.add("task-checkbox-container-active")}if(o.classList.contains("view-task-container-close"))for(e.classList.add("hover-task-container"),r=0;r<t.length;r++)a=t[r],n[r].classList.remove("task-checkbox-container-active"),a.checked=!1,localStorage.removeItem("task_id")})),window.addEventListener("click",(function(){var e=null===event||void 0===event?void 0:event.target;e.closest(".registration")&&!e.closest(".container")&&(location.href="../#main-page")}))})();